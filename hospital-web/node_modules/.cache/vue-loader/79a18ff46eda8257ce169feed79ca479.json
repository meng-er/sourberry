{"remainingRequest":"/Users/gym/Desktop/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/gym/Desktop/frontend/src/views/cottoms/cottoms_detail.vue?vue&type=style&index=1&lang=scss&","dependencies":[{"path":"/Users/gym/Desktop/frontend/src/views/cottoms/cottoms_detail.vue","mtime":1598472694000},{"path":"/Users/gym/Desktop/frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gym/Desktop/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/gym/Desktop/frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/gym/Desktop/frontend/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gym/Desktop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gym/Desktop/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiNjb3R0b21zRGV0YWlsIHsKICAuZWwtZm9ybS1pdGVtX19jb250ZW50IHsKICAgIG1hcmdpbi1sZWZ0OiAwcHggIWltcG9ydGFudDsKICB9CiAgLmVsLWZvcm0taXRlbV9fbGFiZWwgewogICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsKICAgIHRleHQtYWxpZ246IGxlZnQgIWltcG9ydGFudDsKICB9CiAgLmVsLWZvcm0taXRlbSB7CiAgICBtYXJnaW4tYm90dG9tOiAxMHB4OwogIH0KfQo="},{"version":3,"sources":["cottoms_detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cottoms_detail.vue","sourceRoot":"src/views/cottoms","sourcesContent":["<template>\n  <!-- 电子病例详情页 -->\n  <div id=\"cottomsDetail\">\n    <el-container>\n      <el-header class=\"header\">\n        <h1>病例夹</h1>\n        <p v-if=\"!revamp\" style=\"color:red;\" @click=\"edit\">\n          <i class=\"el-icon-edit\"></i>\n          修改信息\n        </p>\n        <!-- 修改信息按钮 该按钮是否显示由revamp变量控制，点击时候执行edit方法 -->\n      </el-header>\n      <!-- 头部导航内容 -->\n\n      <el-divider></el-divider>\n\n      <el-main>\n        <el-row>\n          <el-col :span=\"7\">\n            <el-form\n              :model=\"cottomsDetail\"\n              ref=\"ruleForm\"\n              label-width=\"100px\"\n              class=\"demo-ruleForm\"\n              :disabled=\"!revamp\"\n            >\n              <el-form-item label=\"患者姓名\" prop=\"name\">\n                <el-input v-model=\"cottomsDetail.userinfo.username\"></el-input>\n              </el-form-item>\n              <el-row class=\"formInline\">\n                <el-col :span=\"11\">\n                  <el-form-item label=\"性别\" prop=\"sex\">\n                    <el-select\n                      v-model=\"cottomsDetail.userinfo.gender\"\n                      placeholder=\"性别\"\n                    >\n                      <el-option label=\"男\" value=\"1\"></el-option>\n                      <el-option label=\"女\" value=\"0\"></el-option>\n                    </el-select>\n                  </el-form-item>\n                </el-col>\n                <el-col :span=\"11\" :offset=\"2\">\n                  <el-form-item label=\"年龄\" prop=\"age\">\n                    <el-input v-model=\"cottomsAge\"></el-input>\n                  </el-form-item>\n                </el-col>\n              </el-row>\n\n              <el-form-item label=\"就诊日期\">\n                <el-col :span=\"10\">\n                  <!-- <el-date-picker\n                    type=\"year\"\n                    placeholder=\"选择年份\"\n                    style=\"width: 100%;\"\n                    v-model=\"cottomsDetail.seektime\"\n                  ></el-date-picker> -->\n\n                  <el-input\n                    :placeholder=\"date.year\"\n                    v-model=\"date.year\"\n                    :value=\"date.year\"\n                  ></el-input>\n                </el-col>\n                <el-col :span=\"2\" style=\"text-align:center;\"\n                  >&nbsp;&nbsp;年</el-col\n                >\n                <el-col :span=\"10\">\n                  <!-- <el-date-picker\n                    placeholder=\"选择月份\"\n                    style=\"width: 100%;\"\n                    type=\"month\"\n                    v-model=\"cottomsDetail.seektime\"\n                  ></el-date-picker> -->\n                  <el-input\n                    :placeholder=\"date.month\"\n                    :value=\"date.month\"\n                    v-model=\"date.month\"\n                  ></el-input>\n                </el-col>\n                <el-col :span=\"2\" style=\"text-align:center;\">&nbsp;月</el-col>\n              </el-form-item>\n              <el-form-item label=\"联系电话\" prop=\"name\">\n                <el-input v-model=\"cottomsDetail.phone\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"地址\" prop=\"name\">\n                <el-input v-model=\"cottomsDetail.userinfo.address\"></el-input>\n              </el-form-item>\n            </el-form>\n          </el-col>\n          <el-col :span=\"1\" class=\"divider\">\n            <el-divider direction=\"vertical\"></el-divider>\n          </el-col>\n\n          <el-col :span=\"7\">\n            <el-form\n              :disabled=\"!revamp\"\n              :model=\"cottomsDetail\"\n              ref=\"ruleForm\"\n              label-width=\"100px\"\n              class=\"demo-ruleForm\"\n            >\n              <el-form-item label=\"就诊科室\" prop=\"name\">\n                <el-input\n                  v-model=\"cottomsDetail.departmentinfo.departmentname\"\n                ></el-input>\n              </el-form-item>\n              <el-form-item label=\"病情描述\" prop=\"name\">\n                <el-input\n                  v-model=\"cottomsDetail.description\"\n                  type=\"textarea\"\n                  :rows=\"6\"\n                  resize=\"none\"\n                ></el-input>\n              </el-form-item>\n\n              <el-form-item label=\"过敏史\" prop=\"name\">\n                <el-input v-model=\"cottomsDetail.guomishi\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"诊断医生\" prop=\"name\">\n                <el-input v-model=\"cottomsDetail.empinfo.username\"></el-input>\n              </el-form-item>\n            </el-form>\n          </el-col>\n          <el-col :span=\"1\" class=\"divider\">\n            <el-divider direction=\"vertical\"></el-divider>\n          </el-col>\n          <el-col :span=\"7\">\n            <el-form\n              :disabled=\"!revamp\"\n              :model=\"cottomsDetail\"\n              ref=\"ruleForm\"\n              class=\"demo-ruleForm\"\n            >\n              <el-form-item label=\"用药详情\" prop=\"name\">\n                <el-input\n                  v-model=\"cottomsDetail.comment\"\n                  type=\"textarea\"\n                  :rows=\"4\"\n                  resize=\"none\"\n                ></el-input>\n              </el-form-item>\n              <el-form-item label=\"备注\" prop=\"name\">\n                <el-input\n                  v-model=\"cottomsDetail.remark\"\n                  type=\"textarea\"\n                  :rows=\"4\"\n                  resize=\"none\"\n                ></el-input>\n              </el-form-item>\n\n              <el-form-item label=\"上传诊断报告\" prop=\"name\">\n                <!-- <el-input\n                  v-model=\"cottomsDetail.name\"\n                  type=\"textarea\"\n                  :rows=\"4\"\n                  resize=\"none\"\n                ></el-input> -->\n                <div>\n                  <img\n                    src=\"../../assets/img/upload_bg.png\"\n                    style=\"border:1px solid #DCDFE6;\"\n                    alt=\"\"\n                  />\n                </div>\n              </el-form-item>\n            </el-form>\n          </el-col>\n        </el-row>\n      </el-main>\n      <div class=\"footer\" v-if=\"revamp\">\n        <p class=\"bg16d\" plain @click=\"save\">保存</p>\n        <p @click=\"cancel\">取消</p>\n      </div>\n    </el-container>\n  </div>\n</template>\n<script>\nimport cottoms_listVue from \"./cottoms_list.vue\";\nexport default {\n  data() {\n    return {\n      revamp: false,\n      //   是否修改数据\n      date: {\n        year: \"\",\n        month: \"\",\n      },\n      //定义时间变量 以便后期拼接后向后台传递数据\n\n      // cottomsDetail是保存病例详情的变量\n      cottomsDetail: {\n        id: null,\n        recordCode: \"67359425737\", //病历编号\n        phone: \"13734741054\", //用户手机号\n        departmentId: 37, //就诊科室ID\n        seektime: \"2020-04-16 00:00:00\", //就诊日期\n        description: \"感觉很难受，很恍惚，不清醒\", //病情描述\n        guomishi: \"无过敏史\", //过敏史\n        diagnosis: \"神经衰弱\", //诊断结果\n        prescription: \"住院治疗\", //处方\n        userId: null, //用户id\n        docId: null, //医生ID\n        comment: \"一天一次，一次20分钟\", //用药详情\n        remark: \"注意不要情绪过激\", //备注\n        state: null,\n        createTime: null, //创建时间\n        updateTime: null, //修改时间\n        empinfo: {\n          //下面这部分和根据科室ID查询该科室医生注释一样~~~，都是医生信息\n          id: 34,\n          username: \"王医生\",\n          password: \"111111\",\n          birthday: \"2020-04-01 15:35:20\",\n          phone: \"13734741053\",\n          address: \"河南-郑州-金水\",\n          roleId: 1,\n          depId: 34,\n          titleId: 33,\n          comment: \"医生界的扛把子，抗击新冠肺炎一马当先\",\n          headimg: null,\n          experience: \"10\",\n          state: 1,\n        },\n        diagnostictype: null, //诊断类型\n        userinfo: {\n          //下面这不分和根据手机号查询用户信息注释一样~~~，都是用户信息\n          id: 34,\n          username: \"jklive\",\n          password: \"123456\",\n          roleid: 1,\n          phone: \"13734741053\",\n          validatecode: null,\n          cid: \"15262919956789003\",\n          birthday: \"2020-04-01 15:33:30\",\n          gender: \"1\",\n          frontimg:\n            \"https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=3497380956,3644779616&fm=26&gp=0.jpg\",\n          backimg:\n            \"https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=3387134982,2837425777&fm=26&gp=0.jpg\",\n          address: \"河南省-郑州市\",\n          bedno: null,\n          departmentid: null,\n          doctorid: null,\n          nurseid: null,\n          instatus: null,\n          state: 1,\n        },\n        departmentinfo: {\n          id: 34,\n          departmentname: \"眼科\",\n          institutionId: null,\n        },\n      },\n    };\n  },\n  mounted() {\n    this.getCottomsDetail();\n  },\n  // 进入页面的时候加载病例详情数据\n  computed: {\n    cottomsAge() {\n      let year = new Date().getFullYear();\n      let bir = this.cottomsDetail.userinfo.birthday.split(\"-\")[0];\n      return year - bir;\n    },\n    // 根据用户的出生日期计算用户的年龄\n  },\n  methods: {\n    getCottomsDetail() {\n      this.$http(\"/medicalrecord/detail\", \"get\", {\n        id: this.$route.query.id,\n        //通过this.$route.query.id获取到跳转时传递过来的id数据，作为参数传递给服务器，告诉服务器要请求的是哪个病历的详情信息\n      }).then((res) => {\n        // console.log(res.result);\n        this.cottomsDetail = res.result;\n        this.date.year = this.cottomsDetail.seektime.split(\"-\")[0];\n        this.date.month = this.cottomsDetail.seektime.split(\"-\")[1];\n        //拆分seektime为年月\n      });\n    },\n    //获取病例详情数据\n\n    edit() {\n      this.revamp = true;\n      this.copyCottomsMessage = JSON.parse(JSON.stringify(this.cottomsDetail));\n    },\n    // 点击编辑按钮，让变量revamp变为true，然后把cottomsDetail数据深拷贝一份保存下来\n\n    cancel() {\n      this.revamp = false;\n      this.cottomsDetail = this.copyCottomsMessage;\n    },\n    //点击取消编辑按钮的时候，让commentsDetail数据变为修改前的数据（在编辑时保存的copyCottomsMessage）\n\n    save() {\n      let {\n        id,\n        userId,\n        gender,\n        seektime,\n        phone,\n        description,\n        guomishi,\n        prescription,\n        comment,\n        remark,\n      } = this.cottomsDetail;\n      // 解构出cottomsDetail中需要的字段，保存下来，在请求接口的时候作为参数传递\n      this.$http(\n        \"/medicalrecord/update\",\n        \"post\",\n\n        {\n          id,\n          userId: this.cottomsDetail.userinfo.id,\n          gender: this.cottomsDetail.userinfo.gender,\n          address: this.cottomsDetail.userinfo.address,\n          seektime: this.date.year + \"-\" + this.date.month,\n          phone,\n          departmentId: this.cottomsDetail.departmentinfo.id,\n          description,\n          guomishi,\n          prescription,\n          comment,\n          remark,\n          doctorid: this.cottomsDetail.empinfo.id,\n          username: this.cottomsDetail.userinfo.username,\n          // 拿到需要的字段传递给后台，seektime对date进行拼接\n        }\n      ).then((res) => {\n        if (res.msg == \"ok\") {\n          this.revamp = false;\n        } else {\n          this.$message({\n            showClose: true,\n            message: \"修改失败\",\n            type: \"error\",\n          });\n        }\n      });\n    },\n    // 点击保存按钮时把修改的内容通过接口传给后台进行保存\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n#cottomsDetail {\n  .header {\n    h1 {\n      font-weight: normal;\n    }\n    display: flex;\n    justify-content: space-between;\n  }\n  .el-main {\n    padding-top: 0;\n  }\n  .el-divider--horizontal {\n    margin: 0;\n  }\n  .el-col-8 {\n    display: flex;\n    flex-direction: column;\n    // height: 70%;\n  }\n  .divider {\n    height: 420px;\n    padding-top: 40px;\n    box-sizing: border-box;\n    display: flex;\n    justify-content: center;\n    .el-divider {\n      height: 100%;\n    }\n  }\n  .footer {\n    display: flex;\n    height: 40px;\n    justify-content: center;\n    p {\n      width: 100px;\n      height: 35px;\n      text-align: center;\n      line-height: 35px;\n      color: #fff;\n    }\n    p:nth-child(2) {\n      background: #ccc;\n      margin-left: 20px;\n    }\n  }\n}\n</style>\n<style lang=\"scss\">\n#cottomsDetail {\n  .el-form-item__content {\n    margin-left: 0px !important;\n  }\n  .el-form-item__label {\n    width: 100% !important;\n    text-align: left !important;\n  }\n  .el-form-item {\n    margin-bottom: 10px;\n  }\n}\n</style>\n"]}]}