{"remainingRequest":"/Users/gym/Desktop/hospital-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/gym/Desktop/hospital-web/src/views/cottoms/cottoms_add.vue?vue&type=style&index=1&lang=scss&","dependencies":[{"path":"/Users/gym/Desktop/hospital-web/src/views/cottoms/cottoms_add.vue","mtime":1598472694000},{"path":"/Users/gym/Desktop/hospital-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gym/Desktop/hospital-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/gym/Desktop/hospital-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/gym/Desktop/hospital-web/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gym/Desktop/hospital-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gym/Desktop/hospital-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojY290dG9tc0FkZCB7CiAgLmVsLWZvcm0taXRlbV9fY29udGVudCB7CiAgICBtYXJnaW4tbGVmdDogMHB4ICFpbXBvcnRhbnQ7CiAgfQogIC5lbC1mb3JtLWl0ZW1fX2xhYmVsIHsKICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7CiAgICB0ZXh0LWFsaWduOiBsZWZ0ICFpbXBvcnRhbnQ7CiAgfQogIC5lbC1mb3JtLWl0ZW0gewogICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICB9Cn0K"},{"version":3,"sources":["cottoms_add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cottoms_add.vue","sourceRoot":"src/views/cottoms","sourcesContent":["<template>\n  <!-- 添加电子病历 -->\n  <div id=\"cottomsAdd\">\n    <el-container>\n      <el-header class=\"header\">\n        <h1>病例夹</h1>\n      </el-header>\n      <el-divider></el-divider>\n      <el-main>\n        <el-row>\n          <el-col :span=\"7\">\n            <el-form\n              :model=\"userInfo\"\n              ref=\"ruleForm\"\n              label-width=\"100px\"\n              class=\"demo-ruleForm\"\n            >\n              <el-form-item label=\"患者姓名\" prop=\"username\">\n                <el-input v-model=\"userInfo.username\"></el-input>\n              </el-form-item>\n              <el-row class=\"formInline\">\n                <el-col :span=\"11\">\n                  <el-form-item label=\"性别\" prop=\"gender\">\n                    <el-select v-model=\"userInfo.gender\" placeholder=\"性别\">\n                      <el-option label=\"男\" value=\"1\"></el-option>\n                      <el-option label=\"女\" value=\"0\"></el-option>\n                    </el-select>\n                  </el-form-item>\n                </el-col>\n                <el-col :span=\"11\" :offset=\"2\">\n                  <el-form-item label=\"年龄\" prop=\"addAge\">\n                    <el-input v-model=\"addAge\"></el-input>\n                  </el-form-item>\n                </el-col>\n              </el-row>\n\n              <el-form-item label=\"就诊日期\">\n                <el-col :span=\"10\">\n                  <el-input\n                    placeholder=\"选择年份\"\n                    v-model=\"userInfo.year\"\n                  ></el-input>\n                </el-col>\n                <el-col :span=\"2\" style=\"text-align:center;\"\n                  >&nbsp;&nbsp;年</el-col\n                >\n                <el-col :span=\"10\">\n                  <el-input\n                    placeholder=\"选择月份\"\n                    v-model=\"userInfo.month\"\n                  ></el-input>\n                </el-col>\n                <el-col :span=\"2\" style=\"text-align:center;\">&nbsp;月</el-col>\n              </el-form-item>\n              <el-form-item label=\"联系电话\" prop=\"phone\">\n                <el-input v-model=\"userInfo.phone\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"地址\" prop=\"adress\">\n                <el-input v-model=\"userInfo.address\"></el-input>\n              </el-form-item>\n            </el-form>\n          </el-col>\n          <el-col :span=\"1\" class=\"divider\">\n            <el-divider direction=\"vertical\"></el-divider>\n          </el-col>\n\n          <el-col :span=\"7\">\n            <el-form\n              :model=\"addCottoms\"\n              ref=\"ruleForm\"\n              label-width=\"100px\"\n              class=\"demo-ruleForm\"\n            >\n              <el-form-item label=\"就诊科室\">\n                <el-select\n                  v-model=\"departvalue\"\n                  placeholder=\"就诊科室\"\n                  @change=\"getDoctor\"\n                >\n                  <el-option\n                    v-for=\"item in PartmentList\"\n                    :key=\"item.id\"\n                    :label=\"item.departmentname\"\n                    :value=\"item.id\"\n                  >\n                  </el-option>\n                </el-select>\n              </el-form-item>\n              <el-form-item label=\"病情描述\" prop=\"description\">\n                <el-input\n                  v-model=\"addCottoms.description\"\n                  type=\"textarea\"\n                  :rows=\"6\"\n                  resize=\"none\"\n                ></el-input>\n              </el-form-item>\n\n              <el-form-item label=\"过敏史\" prop=\"guomishi\">\n                <el-input v-model=\"addCottoms.guomishi\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"诊断医生\" prop=\"\">\n                <el-select v-model=\"doctorvalue\" placeholder=\"诊断医生\">\n                  <el-option\n                    v-for=\"item in doctorList\"\n                    :key=\"item.id\"\n                    :label=\"item.username\"\n                    :value=\"item.id\"\n                  >\n                  </el-option>\n                </el-select>\n              </el-form-item>\n            </el-form>\n          </el-col>\n          <el-col :span=\"1\" class=\"divider\">\n            <el-divider direction=\"vertical\"></el-divider>\n          </el-col>\n          <el-col :span=\"7\">\n            <el-form :model=\"addCottoms\" ref=\"ruleForm\" class=\"demo-ruleForm\">\n              <el-form-item label=\"用药详情\" prop=\"comment\">\n                <el-input\n                  v-model=\"addCottoms.comment\"\n                  type=\"textarea\"\n                  :rows=\"4\"\n                  resize=\"none\"\n                ></el-input>\n              </el-form-item>\n              <el-form-item label=\"备注\" prop=\"remark\">\n                <el-input\n                  v-model=\"addCottoms.remark\"\n                  type=\"textarea\"\n                  :rows=\"4\"\n                  resize=\"none\"\n                ></el-input>\n              </el-form-item>\n\n              <el-form-item label=\"上传诊断报告\" prop=\"\">\n                <el-input type=\"textarea\" :rows=\"4\" resize=\"none\"></el-input>\n              </el-form-item>\n            </el-form>\n          </el-col>\n        </el-row>\n      </el-main>\n      <div class=\"footer\">\n        <p class=\"bg16d\" plain @click=\"addCottom\">保存</p>\n        <p @click=\"addCottoms = {}\">取消</p>\n      </div>\n    </el-container>\n\n    <el-dialog title=\"查询\" :visible.sync=\"dialogFormVisible\" width=\"35%\">\n      <el-form :model=\"phone\">\n        <el-form-item label=\"请输入手机号\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"phone.num\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button round @click=\"getInfo\" class=\"bg16d\">确定</el-button>\n        <el-button round @click=\"dialogFormVisible = false\">取 消</el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog\n      title=\"提示\"\n      :visible.sync=\"centerDialogVisible\"\n      width=\"30%\"\n      center\n    >\n      <span>未找到患者信息,请输入正确的手机号</span>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button round class=\"bg16d\" @click=\"repeat\">确定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      userInfo: {\n        birthday: \"\",\n      },\n      //根据手机号码获取到的用户的信息\n      phone: {\n        num: \"\",\n      },\n      //输入查询的手机号码\n\n      dialogFormVisible: true,\n      //定义输入手机号码的弹窗是否显示\n      centerDialogVisible: false,\n      //定义提示手机号码不正确的弹窗是否显示\n      formLabelWidth: \"120px\",\n\n      addCottoms: {\n        description: \"\",\n        guomishi: \"\",\n        prescription: \"\",\n        comment: \"\",\n        remark: \"\",\n      },\n      // 添加病例的病情信息\n\n      PartmentList: [],\n      //科室信息列表\n      departvalue: \"\",\n      // 被选中的科室信息\n\n      doctorList: [],\n      // 选中科室下的医生信息\n      doctorvalue: \"\",\n      // 选中的诊断医生value\n    };\n  },\n\n  mounted() {\n    this.getPartMentList();\n    // 进入页面就获取科室信息列表\n  },\n\n  computed: {\n    addAge() {\n      let year = new Date().getFullYear();\n      let bir = this.userInfo.birthday.split(\"-\")[0];\n      return year - bir;\n    },\n  },\n  // 计算用户年龄\n\n  methods: {\n    getUserInfo() {\n      this.$http(\"/user/findByPhone\", \"post\", {\n        phone: this.phone.num,\n      }).then((res) => {\n        if (res.msg == \"ok\") {\n          this.userInfo = res.result;\n        } else {\n          this.centerDialogVisible = true;\n          this.dialogFormVisible = false;\n        }\n      });\n    },\n    // 根据手机号码获取用户信息\n\n    getInfo() {\n      this.dialogFormVisible = false;\n      this.getUserInfo();\n    },\n    //点击手机号码确认框确认时执行函数\n\n    repeat() {\n      this.centerDialogVisible = false;\n      this.dialogFormVisible = true;\n    },\n\n    //如果手机号码输入不对，那就再次显示电话号码输入框\n\n    getPartMentList() {\n      this.$http(\"/departmentinfo/list\", \"get\").then((res) => {\n        this.PartmentList = res.result;\n      });\n    },\n    //获取科室信息列表\n\n    getDoctor() {\n      this.doctorvalue = \"\";\n      this.$http(\"/empinfo/findByDid\", \"get\", { id: this.departvalue }).then(\n        (res) => {\n          this.doctorList = res.result;\n        }\n      );\n    },\n    // 根据科室信息获取医生信息\n\n    addCottom() {\n      this.$http(\n        \"/medicalrecord/insert\",\n        \"post\",\n        Object.assign(this.addCottoms, {\n          phone: this.userInfo.phone,\n          seektime: this.userInfo.year + \"-\" + this.userInfo.month,\n          userId: this.userInfo.id,\n          docId: this.doctorvalue,\n          departmentId: this.departvalue,\n        })\n      ).then((res) => {\n        // console.log(res);\n        if (res.suc == true) {\n          this.$message({\n            showClose: true,\n            message: \"添加病例成功\",\n            type: \"success\",\n          });\n        } else {\n          this.$message({\n            showClose: true,\n            message: \"添加病例失败\",\n            type: \"error\",\n          });\n        }\n        // 成功的弹窗和失败的弹窗\n      });\n    },\n    // 添加病例\n    // 检查结果\tCheckinfo\n    // 诊断结果\tdiagnosis\n    // 这两个字段未上传\n  },\n\n  // 取消按钮还没写\n};\n</script>\n<style lang=\"scss\" scoped>\n#cottomsAdd {\n  .header {\n    h1 {\n      font-weight: normal;\n    }\n    display: flex;\n    justify-content: space-between;\n  }\n  .el-main {\n    padding-top: 0;\n  }\n  .el-divider--horizontal {\n    margin: 0;\n  }\n  .el-col-8 {\n    display: flex;\n    flex-direction: column;\n    // height: 70%;\n  }\n  .divider {\n    height: 420px;\n    padding-top: 40px;\n    box-sizing: border-box;\n    display: flex;\n    justify-content: center;\n    .el-divider {\n      height: 100%;\n    }\n  }\n  .footer {\n    display: flex;\n    height: 40px;\n    justify-content: center;\n    p {\n      width: 100px;\n      height: 35px;\n      text-align: center;\n      line-height: 35px;\n      color: #fff;\n    }\n    p:nth-child(2) {\n      background: #ccc;\n      margin-left: 20px;\n    }\n  }\n  .el-dialog {\n    border-radius: 10px;\n    .el-button {\n      width: 100px;\n    }\n    .el-button:nth-child(2) {\n      background: #ccc;\n    }\n  }\n}\n</style>\n<style lang=\"scss\">\n#cottomsAdd {\n  .el-form-item__content {\n    margin-left: 0px !important;\n  }\n  .el-form-item__label {\n    width: 100% !important;\n    text-align: left !important;\n  }\n  .el-form-item {\n    margin-bottom: 10px;\n  }\n}\n</style>\n"]}]}