{"remainingRequest":"/Users/gym/Desktop/hospital-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/gym/Desktop/hospital-web/src/views/mypatient/patient_list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/gym/Desktop/hospital-web/src/views/mypatient/patient_list.vue","mtime":1654309515498},{"path":"/Users/gym/Desktop/hospital-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gym/Desktop/hospital-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/gym/Desktop/hospital-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gym/Desktop/hospital-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBwYXRpZW50SXRlbSBmcm9tICIuLi8uLi9jb21wb25lbnRzL3BhdGllbnRfaXRlbS52dWUiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICAvL+W9k+WJjeeCueWHu+mhteeggeaVsAogICAgICBwYWdlU2l6ZTogMTYsCiAgICAgIC8v5q+P6aG15bGV56S65pWw55uuCiAgICAgIHBhdGllbnRMaXN0OiBbXSwKICAgICAgLy/nl4XkurrliJfooajmlbDmja4KICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBwYXRpZW50SXRlbSwKICB9LCAvL+azqOWGjOeXheS6uuWIl+ihqOadoeebruWtkOe7hOS7tgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldFBhdGllbnRMaXN0KCk7CiAgICAvL+i/m+WFpemhtemdouaXtuWAmeiOt+WPlueXheS6uuWIl+ihqAogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsKICAgICAgY29uc29sZS5sb2coYOavj+mhtSAke3ZhbH0g5p2hYCk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHZhbDsKICAgIH0sIC8v54K55Ye75YiG6aG15pe25pS55Y+Y5b2T5YmN6aG156CB77yM6YeN5paw6K+35rGC5pWw5o2uCgogICAgdG9nZ2xlSXRlbShpdGVtKSB7CiAgICAgIC8vIGlmIChpdGVtLnNlbGVjdCA9PSBmYWxzZSkgewogICAgICAvLyAgIGl0ZW0uc2VsZWN0ID0gdHJ1ZTsKICAgICAgLy8gfSBlbHNlIHsKICAgICAgLy8gICBpdGVtLnNlbGVjdCA9IGZhbHNlOwogICAgICAvLyB9CiAgICAgIGl0ZW0uc2VsZWN0ID0gIWl0ZW0uc2VsZWN0OwogICAgfSwKICAgIC8v54K55Ye755eF5Lq65YiX6KGo5p2h55uu5pe277yM5YiH5o2i6YCJ5Lit5ZKM5pyq6YCJ5Litc2VsZWN05a2X5q6155qE54q25oCBCgogICAgZ2V0UGF0aWVudExpc3QoKSB7CiAgICAgIC8vIHRoaXMuJGh0dHAoCiAgICAgIC8vICAgIi9jb25zdWx0YXRpb25pbmZvL3BhdGllbnRMaXN0IiwKICAgICAgLy8gICAicG9zdCIsCiAgICAgIC8vCiAgICAgIC8vICAgewogICAgICAvLyAgICAgcGFnZU5vOiAxLAogICAgICAvLyAgICAgcGFnZVNpemU6IDEwLAogICAgICAvLyAgIH0KICAgICAgLy8gKS50aGVuKChyZXMpID0+IHsKICAgICAgLy8gICB0aGlzLnBhdGllbnRMaXN0ID0gcmVzLnJlc3VsdC5saXN0OwogICAgICAvLyAgIC8v6K+35rGC5Yiw55qE55eF5Lq65YiX6KGo5pWw5o2u6LWL5YC857uZZGF0YeaVsOaNrnBhdGllbnRMaXN0CiAgICAgIC8vICAgY29uc29sZS5sb2codGhpcy5wYXRpZW50TGlzdCk7CiAgICAgIC8vICAgdGhpcy5wYXRpZW50TGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgIC8vICAgICB0aGlzLiRzZXQoaXRlbSwgInNlbGVjdCIsIGZhbHNlKTsKICAgICAgLy8gICB9KTsKICAgICAgLy8gICAvL+S4uuavj+adoeaVsOaNruWinuWKoOS4gOS4qmtleeWAvHNlbGVjdOS7o+ihqOaYr+WQpumAieS4re+8jOS4uuWQjuacn+eahOaJuemHj+WIoOmZpOS9nOWHhuWkhwogICAgICAvLyB9KTsKICAgIH0sCiAgICBkZWxMaXN0KCkgewogICAgICBsZXQgaWRzID0gW107CiAgICAgIHRoaXMucGF0aWVudExpc3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIGlmIChpdGVtLnNlbGVjdCA9PSB0cnVlKSB7CiAgICAgICAgICBpZHMucHVzaChpdGVtLmlkKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAvLyDmiormiYDmnIlzZWxlY3TlrZfmrrXkuLp0cnVl55qE5L+h5oGv55qEaWTpg73kvKDov5vmlbDnu4TkuK0KICAgICAgaWYgKGlkcy5sZW5ndGggIT09IDApCiAgICAgICAgdGhpcy4kaHR0cCgiY29uc3VsdGF0aW9uaW5mby9wYXRpZW50cyIsICJkZWxldGUiLCB7CiAgICAgICAgICBjb25zdWx0YXRpb25JZHM6IGlkcy5qb2luKCIsIiksCiAgICAgICAgICAvL+S8oOmAkue7meWQjuWPsOaVsOaNru+8jOaKiuaVsOe7hOaLvOaOpeS4uuWtl+espuS4sjHvvIwy77yM55qE5qC85byPCiAgICAgICAgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAocmVzLm1zZyA9PSAib2siKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICBtZXNzYWdlOiAi5Yig6Zmk55eF5Lq65oiQ5YqfIiwKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgIH0gLy/liKDpmaTmiJDlip/lkI7lvLnlh7rmiJDlip/lvLnnqpfvvIzlubbkuJTliLfmlrDpobXpnaIKICAgICAgICB9KTsKICAgIH0sCiAgICAvL+aJuemHj+WIoOmZpAogIH0sCn07Cg=="},{"version":3,"sources":["patient_list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"patient_list.vue","sourceRoot":"src/views/mypatient","sourcesContent":["<template>\n  <div id=\"patientList\">\n    <div class=\"patient_con\">\n      <patient-item\n        v-for=\"(item, index) in patientList\"\n        :key=\"index\"\n        :info=\"item\"\n        @click.native=\"toggleItem(item, item.id)\"\n        :class=\"{ select: item.select }\"\n      ></patient-item>\n      <!-- 每个病人都是一个组件 -->\n    </div>\n    <div class=\"beatch_remove\">\n      <el-button class=\"bg16d\" round icon=\"el-icon-delete\">批量选择不不不</el-button>\n      <el-button round type=\"danger\" icon=\"el-icon-delete\" @click=\"delList\"\n        >批量删除</el-button\n      >\n    </div>\n\n    <el-pagination\n      class=\"page\"\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\"\n      :current-page.sync=\"currentPage\"\n      background\n      :page-size=\"10\"\n      layout=\"prev, pager, next, jumper\"\n      :total=\"100\"\n      :pager-count=\"5\"\n    >\n    </el-pagination>\n    <!-- 分页效果 -->\n  </div>\n</template>\n<script>\nimport patientItem from \"../../components/patient_item.vue\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      currentPage: 1,\n      //当前点击页码数\n      pageSize: 16,\n      //每页展示数目\n      patientList: [],\n      //病人列表数据\n    };\n  },\n  components: {\n    patientItem,\n  }, //注册病人列表条目子组件\n  mounted() {\n    this.getPatientList();\n    //进入页面时候获取病人列表\n  },\n  methods: {\n    handleSizeChange(val) {\n      console.log(`每页 ${val} 条`);\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val;\n    }, //点击分页时改变当前页码，重新请求数据\n\n    toggleItem(item) {\n      // if (item.select == false) {\n      //   item.select = true;\n      // } else {\n      //   item.select = false;\n      // }\n      item.select = !item.select;\n    },\n    //点击病人列表条目时，切换选中和未选中select字段的状态\n\n    getPatientList() {\n      // this.$http(\n      //   \"/consultationinfo/patientList\",\n      //   \"post\",\n      //\n      //   {\n      //     pageNo: 1,\n      //     pageSize: 10,\n      //   }\n      // ).then((res) => {\n      //   this.patientList = res.result.list;\n      //   //请求到的病人列表数据赋值给data数据patientList\n      //   console.log(this.patientList);\n      //   this.patientList.forEach((item) => {\n      //     this.$set(item, \"select\", false);\n      //   });\n      //   //为每条数据增加一个key值select代表是否选中，为后期的批量删除作准备\n      // });\n    },\n    delList() {\n      let ids = [];\n      this.patientList.forEach((item) => {\n        if (item.select == true) {\n          ids.push(item.id);\n        }\n      });\n      // 把所有select字段为true的信息的id都传进数组中\n      if (ids.length !== 0)\n        this.$http(\"consultationinfo/patients\", \"delete\", {\n          consultationIds: ids.join(\",\"),\n          //传递给后台数据，把数组拼接为字符串1，2，的格式\n        }).then((res) => {\n          if (res.msg == \"ok\") {\n            this.$message({\n              showClose: true,\n              message: \"删除病人成功\",\n              type: \"success\",\n            });\n            location.reload();\n          } //删除成功后弹出成功弹窗，并且刷新页面\n        });\n    },\n    //批量删除\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n#patientList {\n  position: relative;\n  .patient_con {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: left;\n  }\n  .el-input__inner {\n    border-radius: 20px;\n  }\n\n  .page {\n    position: absolute;\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: 20px;\n  }\n  .beatch_remove {\n    position: absolute;\n    bottom: 20px;\n    left: 50px;\n    .el-button.is-round {\n      color: #fff;\n      padding: 8px 12px;\n    }\n  }\n  .select {\n    // border: 1px solid rgb(211, 143, 143);\n    background: rgba($color: #918b8b, $alpha: 0.3);\n    // box-sizing: border-box;\n  }\n}\n</style>\n<style lang=\"scss\"></style>\n"]}]}