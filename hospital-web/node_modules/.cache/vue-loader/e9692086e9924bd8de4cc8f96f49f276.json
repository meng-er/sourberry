{"remainingRequest":"/Users/gym/Desktop/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/gym/Desktop/frontend/src/views/mypatient/patient_list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/gym/Desktop/frontend/src/views/mypatient/patient_list.vue","mtime":1598472694000},{"path":"/Users/gym/Desktop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gym/Desktop/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/gym/Desktop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gym/Desktop/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBwYXRpZW50SXRlbSBmcm9tICIuLi8uLi9jb21wb25lbnRzL3BhdGllbnRfaXRlbS52dWUiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICAvL+W9k+WJjeeCueWHu+mhteeggeaVsAogICAgICBwYWdlU2l6ZTogMTYsCiAgICAgIC8v5q+P6aG15bGV56S65pWw55uuCiAgICAgIHBhdGllbnRMaXN0OiBbXSwKICAgICAgLy/nl4XkurrliJfooajmlbDmja4KICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBwYXRpZW50SXRlbSwKICB9LCAvL+azqOWGjOeXheS6uuWIl+ihqOadoeebruWtkOe7hOS7tgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldFBhdGllbnRMaXN0KCk7CiAgICAvL+i/m+WFpemhtemdouaXtuWAmeiOt+WPlueXheS6uuWIl+ihqAogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsKICAgICAgY29uc29sZS5sb2coYOavj+mhtSAke3ZhbH0g5p2hYCk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHZhbDsKICAgIH0sIC8v54K55Ye75YiG6aG15pe25pS55Y+Y5b2T5YmN6aG156CB77yM6YeN5paw6K+35rGC5pWw5o2uCgogICAgdG9nZ2xlSXRlbShpdGVtKSB7CiAgICAgIC8vIGlmIChpdGVtLnNlbGVjdCA9PSBmYWxzZSkgewogICAgICAvLyAgIGl0ZW0uc2VsZWN0ID0gdHJ1ZTsKICAgICAgLy8gfSBlbHNlIHsKICAgICAgLy8gICBpdGVtLnNlbGVjdCA9IGZhbHNlOwogICAgICAvLyB9CiAgICAgIGl0ZW0uc2VsZWN0ID0gIWl0ZW0uc2VsZWN0OwogICAgfSwKICAgIC8v54K55Ye755eF5Lq65YiX6KGo5p2h55uu5pe277yM5YiH5o2i6YCJ5Lit5ZKM5pyq6YCJ5Litc2VsZWN05a2X5q6155qE54q25oCBCgogICAgZ2V0UGF0aWVudExpc3QoKSB7CiAgICAgIHRoaXMuJGh0dHAoCiAgICAgICAgIi9jb25zdWx0YXRpb25pbmZvL3BhdGllbnRMaXN0IiwKICAgICAgICAicG9zdCIsCgogICAgICAgIHsKICAgICAgICAgIHBhZ2VObzogMSwKICAgICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICB9CiAgICAgICkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy5wYXRpZW50TGlzdCA9IHJlcy5yZXN1bHQubGlzdDsKICAgICAgICAvL+ivt+axguWIsOeahOeXheS6uuWIl+ihqOaVsOaNrui1i+WAvOe7mWRhdGHmlbDmja5wYXRpZW50TGlzdAogICAgICAgIGNvbnNvbGUubG9nKHRoaXMucGF0aWVudExpc3QpOwogICAgICAgIHRoaXMucGF0aWVudExpc3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgICAgdGhpcy4kc2V0KGl0ZW0sICJzZWxlY3QiLCBmYWxzZSk7CiAgICAgICAgfSk7CiAgICAgICAgLy/kuLrmr4/mnaHmlbDmja7lop7liqDkuIDkuKprZXnlgLxzZWxlY3Tku6PooajmmK/lkKbpgInkuK3vvIzkuLrlkI7mnJ/nmoTmibnph4/liKDpmaTkvZzlh4blpIcKICAgICAgfSk7CiAgICB9LAogICAgZGVsTGlzdCgpIHsKICAgICAgbGV0IGlkcyA9IFtdOwogICAgICB0aGlzLnBhdGllbnRMaXN0LmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICBpZiAoaXRlbS5zZWxlY3QgPT0gdHJ1ZSkgewogICAgICAgICAgaWRzLnB1c2goaXRlbS5pZCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgLy8g5oqK5omA5pyJc2VsZWN05a2X5q615Li6dHJ1ZeeahOS/oeaBr+eahGlk6YO95Lyg6L+b5pWw57uE5LitCiAgICAgIGlmIChpZHMubGVuZ3RoICE9PSAwKQogICAgICAgIHRoaXMuJGh0dHAoImNvbnN1bHRhdGlvbmluZm8vcGF0aWVudHMiLCAiZGVsZXRlIiwgewogICAgICAgICAgY29uc3VsdGF0aW9uSWRzOiBpZHMuam9pbigiLCIpLAogICAgICAgICAgLy/kvKDpgJLnu5nlkI7lj7DmlbDmja7vvIzmiormlbDnu4Tmi7zmjqXkuLrlrZfnrKbkuLIx77yMMu+8jOeahOagvOW8jwogICAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5tc2cgPT0gIm9rIikgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgICAgbWVzc2FnZTogIuWIoOmZpOeXheS6uuaIkOWKnyIsCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICB9IC8v5Yig6Zmk5oiQ5Yqf5ZCO5by55Ye65oiQ5Yqf5by556qX77yM5bm25LiU5Yi35paw6aG16Z2iCiAgICAgICAgfSk7CiAgICB9LAogICAgLy/mibnph4/liKDpmaQKICB9LAp9Owo="},{"version":3,"sources":["patient_list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"patient_list.vue","sourceRoot":"src/views/mypatient","sourcesContent":["<template>\n  <div id=\"patientList\">\n    <div class=\"patient_con\">\n      <patient-item\n        v-for=\"(item, index) in patientList\"\n        :key=\"index\"\n        :info=\"item\"\n        @click.native=\"toggleItem(item, item.id)\"\n        :class=\"{ select: item.select }\"\n      ></patient-item>\n      <!-- 每个病人都是一个组件 -->\n    </div>\n    <div class=\"beatch_remove\">\n      <el-button class=\"bg16d\" round icon=\"el-icon-delete\">批量选择</el-button>\n      <el-button round type=\"danger\" icon=\"el-icon-delete\" @click=\"delList\"\n        >批量删除</el-button\n      >\n    </div>\n\n    <el-pagination\n      class=\"page\"\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\"\n      :current-page.sync=\"currentPage\"\n      background\n      :page-size=\"10\"\n      layout=\"prev, pager, next, jumper\"\n      :total=\"100\"\n      :pager-count=\"5\"\n    >\n    </el-pagination>\n    <!-- 分页效果 -->\n  </div>\n</template>\n<script>\nimport patientItem from \"../../components/patient_item.vue\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      currentPage: 1,\n      //当前点击页码数\n      pageSize: 16,\n      //每页展示数目\n      patientList: [],\n      //病人列表数据\n    };\n  },\n  components: {\n    patientItem,\n  }, //注册病人列表条目子组件\n  mounted() {\n    this.getPatientList();\n    //进入页面时候获取病人列表\n  },\n  methods: {\n    handleSizeChange(val) {\n      console.log(`每页 ${val} 条`);\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val;\n    }, //点击分页时改变当前页码，重新请求数据\n\n    toggleItem(item) {\n      // if (item.select == false) {\n      //   item.select = true;\n      // } else {\n      //   item.select = false;\n      // }\n      item.select = !item.select;\n    },\n    //点击病人列表条目时，切换选中和未选中select字段的状态\n\n    getPatientList() {\n      this.$http(\n        \"/consultationinfo/patientList\",\n        \"post\",\n\n        {\n          pageNo: 1,\n          pageSize: 10,\n        }\n      ).then((res) => {\n        this.patientList = res.result.list;\n        //请求到的病人列表数据赋值给data数据patientList\n        console.log(this.patientList);\n        this.patientList.forEach((item) => {\n          this.$set(item, \"select\", false);\n        });\n        //为每条数据增加一个key值select代表是否选中，为后期的批量删除作准备\n      });\n    },\n    delList() {\n      let ids = [];\n      this.patientList.forEach((item) => {\n        if (item.select == true) {\n          ids.push(item.id);\n        }\n      });\n      // 把所有select字段为true的信息的id都传进数组中\n      if (ids.length !== 0)\n        this.$http(\"consultationinfo/patients\", \"delete\", {\n          consultationIds: ids.join(\",\"),\n          //传递给后台数据，把数组拼接为字符串1，2，的格式\n        }).then((res) => {\n          if (res.msg == \"ok\") {\n            this.$message({\n              showClose: true,\n              message: \"删除病人成功\",\n              type: \"success\",\n            });\n            location.reload();\n          } //删除成功后弹出成功弹窗，并且刷新页面\n        });\n    },\n    //批量删除\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n#patientList {\n  position: relative;\n  .patient_con {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: left;\n  }\n  .el-input__inner {\n    border-radius: 20px;\n  }\n\n  .page {\n    position: absolute;\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: 20px;\n  }\n  .beatch_remove {\n    position: absolute;\n    bottom: 20px;\n    left: 50px;\n    .el-button.is-round {\n      color: #fff;\n      padding: 8px 12px;\n    }\n  }\n  .select {\n    // border: 1px solid rgb(211, 143, 143);\n    background: rgba($color: #918b8b, $alpha: 0.3);\n    // box-sizing: border-box;\n  }\n}\n</style>\n<style lang=\"scss\"></style>\n"]}]}